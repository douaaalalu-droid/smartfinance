{% extends 'dashboard/base.html' %}

{% block content %}

<div class="card mb-4 shadow-sm">
   <div class="card-header text-dark text-center" style="background-color: #cbdeec;">
        <h4 class="mb-1 fw-bold">
            ğŸ“˜ Ø¯ÙØªØ± Ø§Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¹Ø§Ù…
        </h4>
        <span class="badge text-white" style="background: linear-gradient(90deg, #1a2742, #a6bbe9); font-size: 0.9rem; padding: 6px 12px;">
            General Ledger
        </span>
   </div>
</div>



<div class="card mb-4 shadow-sm">
    <div class="card-body">
        <form method="get" class="row align-items-end">
            <div class="col-md-6">
                <label class="form-label fw-bold">
                    ğŸ” Ø§Ø®ØªØ± Ø§Ù„Ø­Ø³Ø§Ø¨
                </label>
                <select
                    name="account"
                    class="form-select"
                    onchange="this.form.submit()"
                >
                    <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø­Ø³Ø§Ø¨ --</option>
                    {% for acc in accounts %}
                        <option value="{{ acc.id }}"
                            {% if selected_account and acc.id == selected_account.id %}
                                selected
                            {% endif %}
                        >
                            {{ acc.code }} - {{ acc.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </form>
    </div>
</div>

{% if selected_account %}


<div class="card mb-3 shadow-sm">
    <div class="card-header bg-light fw-bold">
        ğŸ“Š Ø­Ø±ÙƒØ© Ø§Ù„Ø­Ø³Ø§Ø¨:
        <span class="text-primary">
            {{ selected_account.code }} - {{ selected_account.name }}
        </span>
    </div>
</div>


<div class="card shadow-sm">
    <div class="card-body p-0">
        <table class="table table-bordered table-striped table-hover text-center mb-0">
            <thead class="table-dark">
                <tr>
                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                    <th>Ù…Ø¯ÙŠÙ†</th>
                    <th>Ø¯Ø§Ø¦Ù†</th>
                    <th>Ø§Ù„Ø±ØµÙŠØ¯</th>
                </tr>
            </thead>
            <tbody>
                {% for line in lines %}
                <tr>
                    <td>{{ line.journal_entry.date }}</td>
                    <td class="text-start">
                        {{ line.journal_entry.description }}
                    </td>
                    <td class="text-success fw-bold">
                        {{ line.debit }}
                    </td>
                    <td class="text-danger fw-bold">
                        {{ line.credit }}
                    </td>
                    <td class="fw-bold">
                        {{ line.running_balance }}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-muted">
                        Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endif %}

{% endblock %}
