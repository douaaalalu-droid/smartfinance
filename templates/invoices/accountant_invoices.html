{% extends 'dashboard/base.html' %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold">๐ ูุฑุงุฌุนุฉ ุงูููุงุชูุฑ</h3>

    <!-- ุฒุฑ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ (ูููุญุงุณุจ ุฃูุถูุง) -->
    <a href="{% url 'create_invoice' %}" class="btn btn-primary">
        โ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
    </a>
</div>

<div class="card shadow-sm">
    <div class="card-header bg-dark text-white">
        ูุงุฆูุฉ ุงูููุงุชูุฑ ุงููุฏุฎูุฉ
    </div>

    <div class="card-body">

        <table class="table table-bordered table-striped text-center align-middle">
            <thead class="table-secondary">
                <tr>
                    <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                    <th>ููุน ุงููุงุชูุฑุฉ</th>
                    <th>ุงูุนููู / ุงูููุฑุฏ</th>
                    <th>ุงููุจูุบ ุงูุฅุฌูุงูู</th>
                    <th>ุชุงุฑูุฎ ุงููุงุชูุฑุฉ</th>
                    <th>ุฃุฏุฎูุช ุจูุงุณุทุฉ</th>
                    <th>ุงูุญุงูุฉ</th>
                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                </tr>
            </thead>

            <tbody>
                {% for invoice in invoices %}
                <tr>
                    <td>{{ invoice.invoice_number }}</td>
                    <td>{{ invoice.get_invoice_type_display }}</td>
                    <td>{{ invoice.customer_name }}</td>
                    <td class="fw-bold text-primary">
                        {{ invoice.total_amount }}
                    </td>
                    <td>{{ invoice.invoice_date }}</td>
                    <td>{{ invoice.created_by.username }}</td>

                    <!-- ุงูุญุงูุฉ -->
                    <td>
                        {% if invoice.is_approved %}
                            <span class="badge bg-success">โ ูุนุชูุฏุฉ</span>
                        {% else %}
                            <span class="badge bg-warning text-dark">โณ ุจุงูุชุธุงุฑ ุงูุงุนุชูุงุฏ</span>
                        {% endif %}
                    </td>

                    <!-- ุงูุฅุฌุฑุงุกุงุช -->
                    <td class="d-flex justify-content-center gap-2">

                        <!-- ุฒุฑ ุนุฑุถ ุงููุงุชูุฑุฉ -->
                        <a href="{% url 'invoice_detail' invoice.id %}"
                           class="btn btn-sm btn-info">
                            ๐ ุนุฑุถ
                        </a>

                        <!-- ุฒุฑ ุงูุงุนุชูุงุฏ -->
                        {% if not invoice.is_approved %}
                            <a href="{% url 'approve_invoice' invoice.id %}"
                               class="btn btn-sm btn-success">
                                โ ุงุนุชูุงุฏ
                            </a>
                        {% else %}
                            <span class="text-muted">โ</span>
                        {% endif %}

                    </td>
                </tr>

                {% empty %}
                <tr>
                    <td colspan="8" class="text-muted">
                        ูุง ุชูุฌุฏ ููุงุชูุฑ
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>

{% endblock %}
