{% extends 'dashboard/base.html' %}

{% block content %}

<a href="{% url 'accountant_invoices' %}" class="btn btn-dark mb-3">
ğŸ“„ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±
</a>
<div class="mb-3">
    <a href="{% url 'accountant_invoices' %}" class="btn btn-secondary">
        ğŸ“„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±
    </a>

    <a href="{% url 'accountant_invoices' %}?status=approved" class="btn btn-success">
        âœ… Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©
    </a>

    <a href="{% url 'accountant_invoices' %}?status=pending" class="btn btn-warning">
        ğŸ•’ ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯Ø©
    </a>
</div>


<h3 class="mb-4">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨</h3>
<hr>

<h3 class="mb-4">Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠØ¯ ÙÙŠ Ø¯ÙØªØ± Ø§Ù„Ù‚ÙŠÙˆØ¯</h3> 
<hr>
<div class='card mb_4'>
    <div class="card-header bg-success text-white">
        Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ
    </div>

        <form method="post">
            {% csrf_token %}

            <div class="row mb-3">
                <div class="col-md-4">
                    <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                    {{ form.date }}
                </div>

            
                <div class="col-md-8">
                    <label>Ø§Ù„ÙˆØµÙ</label>
                    {{form.description}}
                </div>
            </div>

<div class="row mb-3">
    <div class="col-md-6">
        <label class="fw-bold">Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©</label>
        {{ form.period }}
        {% if form.period.errors %}
            <div class="text-danger small mt-1">
                {{ form.period.errors }}
            </div>
        {% endif %}
    </div>
</div>
            
            {{formset.management_form}}
    <table class="table table-bordered text-center">
        <thead>
            <tr>
                <th>Ø§Ù„Ø­Ø³Ø§Ø¨</th>
                <th>Ù…Ø¯ÙŠÙ†</th>
                <th>Ø¯Ø§Ø¦Ù†</th>
                <th>Ø­Ø°Ù</th>
            </tr>
        </thead>
        <tbody>

         {% for line in formset%}
       <tr>
    <td>{{ line.account }}</td>
    <td>{{ line.debit }}</td>
    <td>{{ line.credit }}</td>
    <td>{{ line.DELETE }}</td>
       </tr>
          {%endfor%}
        </tbody>
    </table>

        

    <button class="btn btn-primary mt-3">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ¯</button>
        </form>
    </div>
</div>
xx
<div class="mb-3">
    <a href="{% url 'accountant_dashboard' %}" class="btn btn-secondary">
        ğŸ“˜ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙˆØ¯
    </a>

    <a href="{% url 'accountant_dashboard' %}?status=approved" class="btn btn-success">
        âœ… Ù‚ÙŠÙˆØ¯ Ù…Ø¹ØªÙ…Ø¯Ø©
    </a>

    <a href="{% url 'accountant_dashboard' %}?status=draft" class="btn btn-warning">
        ğŸ•’ Ù‚ÙŠÙˆØ¯ Ù…Ø³ÙˆØ¯Ø©
    </a>
</div>


    <div class="card-body">
        <table class="table table-bordered text-center">
            <thead>
                <tr>
                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    <th>Ø§Ù„Ø­Ø³Ø§Ø¨</th>
                    <th>Ù…Ø¯ÙŠÙ†</th>
                    <th>Ø¯Ø§Ø¦Ù†</th>
                    <th>Ø£Ø¯Ø®Ù„ Ø¨ÙˆØ§Ø³Ø·Ø©</th>
                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                   {% for line in entry.lines.all %}
                <tr>
                    <td>{{ entry.date }}</td>
                    <td>{{ line.account }}</td>
                    <td>{{ line.debit }}</td>
                    <td>{{ line.credit }}</td>
                    <td>{{ entry.created_by.get_full_name|default:entry.created_by.username }}</td>

<td>
    {% if entry.status == 'approved' %}
        âœ… Ù…Ø¹ØªÙ…Ø¯
    {% else %}
        ğŸ•’ Ù…Ø³ÙˆØ¯Ø©
        <br>
        <a href="{% url 'approve_journal_entry' entry.id %}"
           class="btn btn-sm btn-success mt-1">
           Ø§Ø¹ØªÙ…Ø§Ø¯
        </a>
    {% endif %}
</td>

                </tr>
                   {%endfor%}
              {% empty %}
                <tr>
                    <td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙŠÙˆØ¯</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
